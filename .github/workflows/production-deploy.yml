name: ğŸš€ ìš´ì˜ ë°°í¬ íŒŒì´í”„ë¼ì¸

on:
  push:
    tags:
      - 'v*.*.*'  # v2.1.0 í˜•íƒœì˜ íƒœê·¸
  release:
    types: [published]
  workflow_dispatch:  # ìˆ˜ë™ ë°°í¬ í—ˆìš©
    inputs:
      environment:
        description: 'ë°°í¬ í™˜ê²½'
        required: true
        default: 'staging'
        type: choice
        options:
          - staging
          - production
      skip_tests:
        description: 'í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ (ê¸´ê¸‰ ë°°í¬ìš©)'
        required: false
        default: false
        type: boolean

env:
  NODE_VERSION: '20'
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}/vridge-web

permissions:
  contents: read
  packages: write
  deployments: write
  checks: write
  pull-requests: write

jobs:
  # ========================================
  # Stage 1: ë°°í¬ ì „ ê²€ì¦ (Pre-deployment Validation)
  # ========================================
  pre-deployment-validation:
    name: ğŸ” ë°°í¬ ì „ ê²€ì¦
    runs-on: ubuntu-latest
    outputs:
      version: ${{ steps.version.outputs.version }}
      environment: ${{ steps.environment.outputs.environment }}
      should-deploy: ${{ steps.validation.outputs.should-deploy }}
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ë²„ì „ ì¶”ì¶œ
        id: version
        run: |
          if [[ $GITHUB_REF == refs/tags/* ]]; then
            VERSION=${GITHUB_REF#refs/tags/}
          else
            VERSION=$(cat package.json | jq -r '.version')
          fi
          echo "version=$VERSION" >> $GITHUB_OUTPUT
          echo "ğŸ“¦ Deploying version: $VERSION"

      - name: ë°°í¬ í™˜ê²½ ê²°ì •
        id: environment
        run: |
          if [[ "${{ github.event.inputs.environment }}" != "" ]]; then
            ENVIRONMENT="${{ github.event.inputs.environment }}"
          elif [[ $GITHUB_REF == refs/tags/* ]]; then
            if [[ ${{ steps.version.outputs.version }} =~ -beta|-alpha|-rc ]]; then
              ENVIRONMENT="staging"
            else
              ENVIRONMENT="production"
            fi
          else
            ENVIRONMENT="staging"
          fi
          echo "environment=$ENVIRONMENT" >> $GITHUB_OUTPUT
          echo "ğŸ¯ Target environment: $ENVIRONMENT"

      - name: ë°°í¬ ìŠ¹ì¸ í™•ì¸
        id: validation
        run: |
          ENVIRONMENT="${{ steps.environment.outputs.environment }}"
          
          if [[ "$ENVIRONMENT" == "production" ]]; then
            echo "ğŸš¨ Production deployment requires additional validation"
            echo "should-deploy=false" >> $GITHUB_OUTPUT
            
            # ìš´ì˜ ë°°í¬ ì¡°ê±´ í™•ì¸
            if [[ "${{ github.event_name }}" == "release" ]] && [[ "${{ github.event.action }}" == "published" ]]; then
              echo "âœ… Release published - production deployment approved"
              echo "should-deploy=true" >> $GITHUB_OUTPUT
            elif [[ "${{ github.event.inputs.environment }}" == "production" ]]; then
              echo "âœ… Manual production deployment requested"
              echo "should-deploy=true" >> $GITHUB_OUTPUT
            fi
          else
            echo "âœ… Staging deployment approved"
            echo "should-deploy=true" >> $GITHUB_OUTPUT
          fi

  # ========================================
  # Stage 2: ë³´ì•ˆ ê²€ì‚¬ (Security Scan)
  # ========================================
  security-scan:
    name: ğŸ”’ ë³´ì•ˆ ê²€ì‚¬
    runs-on: ubuntu-latest
    needs: pre-deployment-validation
    if: needs.pre-deployment-validation.outputs.should-deploy == 'true'
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: ì˜ì¡´ì„± ë³´ì•ˆ ê²€ì‚¬
        uses: actions/dependency-review-action@v4
        with:
          fail-on-severity: high

      - name: CodeQL ë³´ì•ˆ ìŠ¤ìº”
        uses: github/codeql-action/init@v3
        with:
          languages: typescript, javascript

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº” (npm audit)
        run: |
          echo "ğŸ” Running npm security audit..."
          npm audit --audit-level=high
          
          # ì¤‘ìš” ì·¨ì•½ì ì´ ìˆìœ¼ë©´ ë°°í¬ ì¤‘ë‹¨
          VULNERABILITIES=$(npm audit --json | jq '.metadata.vulnerabilities.high + .metadata.vulnerabilities.critical')
          if [ "$VULNERABILITIES" -gt 0 ]; then
            echo "âŒ High/Critical vulnerabilities found: $VULNERABILITIES"
            echo "Fix vulnerabilities before deploying to production"
            exit 1
          fi
          
          echo "âœ… No high/critical vulnerabilities found"

      - name: CodeQL ë¶„ì„ ì™„ë£Œ
        uses: github/codeql-action/analyze@v3

      - name: ì‹œí¬ë¦¿ ìŠ¤ìº” (GitLeaks)
        uses: gitleaks/gitleaks-action@v2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  # ========================================
  # Stage 3: í’ˆì§ˆ ê²Œì´íŠ¸ (ê¸°ì¡´ í’ˆì§ˆ ê²Œì´íŠ¸ ì¬ì‹¤í–‰)
  # ========================================
  quality-gates:
    name: ğŸ“Š í’ˆì§ˆ ê²Œì´íŠ¸ ê²€ì¦
    uses: ./.github/workflows/quality-gates.yml
    needs: pre-deployment-validation
    if: needs.pre-deployment-validation.outputs.should-deploy == 'true' && !inputs.skip_tests
    secrets: inherit

  # ========================================
  # Stage 4: ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë¹Œë“œ ë° í‘¸ì‹œ
  # ========================================
  build-and-push:
    name: ğŸ—ï¸ ì»¨í…Œì´ë„ˆ ë¹Œë“œ ë° í‘¸ì‹œ
    runs-on: ubuntu-latest
    needs: [pre-deployment-validation, security-scan]
    if: needs.pre-deployment-validation.outputs.should-deploy == 'true'
    outputs:
      image: ${{ steps.image.outputs.image }}
      digest: ${{ steps.build.outputs.digest }}
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¡œê·¸ì¸
        uses: docker/login-action@v3
        with:
          registry: ${{ env.REGISTRY }}
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
        id: meta
        uses: docker/metadata-action@v5
        with:
          images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
          tags: |
            type=ref,event=tag
            type=ref,event=branch
            type=sha,prefix=${{ needs.pre-deployment-validation.outputs.version }}-
            type=raw,value=latest,enable={{is_default_branch}}

      - name: ë©€í‹° í”Œë«í¼ ë¹Œë” ì„¤ì •
        uses: docker/setup-buildx-action@v3

      - name: ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë¹Œë“œ ë° í‘¸ì‹œ
        id: build
        uses: docker/build-push-action@v6
        with:
          context: .
          file: ./Dockerfile
          push: true
          tags: ${{ steps.meta.outputs.tags }}
          labels: ${{ steps.meta.outputs.labels }}
          platforms: linux/amd64,linux/arm64
          cache-from: type=gha
          cache-to: type=gha,mode=max
          build-args: |
            VERSION=${{ needs.pre-deployment-validation.outputs.version }}
            ENVIRONMENT=${{ needs.pre-deployment-validation.outputs.environment }}

      - name: ì´ë¯¸ì§€ ì •ë³´ ì¶œë ¥
        id: image
        run: |
          IMAGE="${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}"
          echo "image=$IMAGE" >> $GITHUB_OUTPUT
          echo "ğŸ³ Built image: $IMAGE"
          echo "ğŸ“‹ Digest: ${{ steps.build.outputs.digest }}"

      - name: ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ìŠ¤ìº”
        uses: aquasecurity/trivy-action@master
        with:
          image-ref: '${{ steps.image.outputs.image }}@${{ steps.build.outputs.digest }}'
          format: 'sarif'
          output: 'trivy-results.sarif'

      - name: ë³´ì•ˆ ìŠ¤ìº” ê²°ê³¼ ì—…ë¡œë“œ
        uses: github/codeql-action/upload-sarif@v3
        if: always()
        with:
          sarif_file: 'trivy-results.sarif'

  # ========================================
  # Stage 5: ìŠ¤í…Œì´ì§• ë°°í¬
  # ========================================
  deploy-staging:
    name: ğŸ§ª ìŠ¤í…Œì´ì§• ë°°í¬
    runs-on: ubuntu-latest
    needs: [pre-deployment-validation, build-and-push]
    if: needs.pre-deployment-validation.outputs.should-deploy == 'true'
    environment: 
      name: staging
      url: https://staging.vridge.vlanet.net
    
    steps:
      - name: ìŠ¤í…Œì´ì§• í™˜ê²½ ë°°í¬
        run: |
          echo "ğŸš€ Deploying to staging environment..."
          echo "Image: ${{ needs.build-and-push.outputs.image }}"
          echo "Version: ${{ needs.pre-deployment-validation.outputs.version }}"
          
          # ì‹¤ì œ ë°°í¬ ë¡œì§ (ì˜ˆ: Kubernetes, Docker Swarm, Vercel ë“±)
          # kubectl set image deployment/vridge-web vridge-web=${{ needs.build-and-push.outputs.image }}
          
          echo "âœ… Staging deployment completed"

      - name: í—¬ìŠ¤ì²´í¬ (ìŠ¤í…Œì´ì§•)
        run: |
          echo "ğŸ” Running health checks on staging..."
          
          # ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ëŒ€ê¸° (ìµœëŒ€ 5ë¶„)
          for i in {1..30}; do
            if curl -f -s https://staging.vridge.vlanet.net/api/health > /dev/null; then
              echo "âœ… Staging application is healthy"
              break
            fi
            echo "â³ Waiting for application to start... ($i/30)"
            sleep 10
          done
          
          # ê¸°ë³¸ API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
          curl -f https://staging.vridge.vlanet.net/api/health || exit 1
          curl -f https://staging.vridge.vlanet.net/ || exit 1
          
          echo "âœ… All health checks passed"

      - name: ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        run: |
          echo "ğŸ§ª Running smoke tests on staging..."
          
          # E2E ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
          npx playwright test --config=playwright.staging.config.ts --project=staging-smoke
          
          echo "âœ… Smoke tests passed"

  # ========================================
  # Stage 6: ìš´ì˜ ë°°í¬ (ìŠ¹ì¸ í•„ìš”)
  # ========================================
  deploy-production:
    name: ğŸŒŸ ìš´ì˜ ë°°í¬
    runs-on: ubuntu-latest
    needs: [pre-deployment-validation, build-and-push, deploy-staging]
    if: needs.pre-deployment-validation.outputs.environment == 'production' && needs.pre-deployment-validation.outputs.should-deploy == 'true'
    environment:
      name: production
      url: https://vridge.vlanet.net
    
    steps:
      - name: ìš´ì˜ ë°°í¬ ì‹œì‘ ì•Œë¦¼
        uses: 8398a7/action-slack@v3
        with:
          status: custom
          custom_payload: |
            {
              "text": "ğŸš€ Production deployment started",
              "attachments": [{
                "color": "warning",
                "fields": [{
                  "title": "Version",
                  "value": "${{ needs.pre-deployment-validation.outputs.version }}",
                  "short": true
                }, {
                  "title": "Triggered by",
                  "value": "${{ github.actor }}",
                  "short": true
                }]
              }]
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: ë¸”ë£¨-ê·¸ë¦° ë°°í¬ ì¤€ë¹„
        run: |
          echo "ğŸ”„ Preparing blue-green deployment..."
          
          # í˜„ì¬ í™œì„± ìŠ¬ë¡¯ í™•ì¸
          CURRENT_SLOT=$(curl -s https://api.vlanet.net/deployment/current-slot || echo "blue")
          TARGET_SLOT=$([ "$CURRENT_SLOT" = "blue" ] && echo "green" || echo "blue")
          
          echo "Current active slot: $CURRENT_SLOT"
          echo "Target deployment slot: $TARGET_SLOT"
          echo "target-slot=$TARGET_SLOT" >> $GITHUB_ENV

      - name: ìš´ì˜ í™˜ê²½ ë°°í¬
        run: |
          echo "ğŸŒŸ Deploying to production environment..."
          echo "Target slot: ${{ env.target-slot }}"
          echo "Image: ${{ needs.build-and-push.outputs.image }}"
          
          # ì‹¤ì œ ìš´ì˜ ë°°í¬ ë¡œì§
          # kubectl set image deployment/vridge-web-${{ env.target-slot }} vridge-web=${{ needs.build-and-push.outputs.image }}
          
          echo "âœ… Production deployment to ${{ env.target-slot }} completed"

      - name: í—¬ìŠ¤ì²´í¬ (ìš´ì˜)
        run: |
          echo "ğŸ” Running health checks on production (${{ env.target-slot }} slot)..."
          
          # ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ëŒ€ê¸° (ìµœëŒ€ 10ë¶„)
          for i in {1..60}; do
            if curl -f -s https://${{ env.target-slot }}.vridge.vlanet.net/api/health > /dev/null; then
              echo "âœ… Production application is healthy"
              break
            fi
            echo "â³ Waiting for application to start... ($i/60)"
            sleep 10
          done
          
          # ìƒì„¸ í—¬ìŠ¤ì²´í¬
          curl -f https://${{ env.target-slot }}.vridge.vlanet.net/api/health || exit 1
          curl -f https://${{ env.target-slot }}.vridge.vlanet.net/ || exit 1
          
          # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
          curl -f https://${{ env.target-slot }}.vridge.vlanet.net/api/db-health || exit 1
          
          echo "âœ… All production health checks passed"

      - name: ìš´ì˜ ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸
        run: |
          echo "ğŸ§ª Running production smoke tests..."
          
          # ìš´ì˜ í™˜ê²½ ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸
          PLAYWRIGHT_BASE_URL=https://${{ env.target-slot }}.vridge.vlanet.net \
          npx playwright test --config=playwright.production.config.ts --project=production-smoke
          
          echo "âœ… Production smoke tests passed"

      - name: íŠ¸ë˜í”½ ìŠ¤ìœ„ì¹­ (Blue-Green)
        run: |
          echo "ğŸ”„ Switching production traffic to ${{ env.target-slot }} slot..."
          
          # ë¡œë“œë°¸ëŸ°ì„œ íŠ¸ë˜í”½ ìŠ¤ìœ„ì¹­
          # kubectl patch service vridge-web-lb -p '{"spec":{"selector":{"slot":"${{ env.target-slot }}"}}}'
          
          # DNS ì—…ë°ì´íŠ¸ (í•„ìš”ì‹œ)
          # ë˜ëŠ” CDN ì„¤ì • ì—…ë°ì´íŠ¸
          
          echo "âœ… Traffic switched to ${{ env.target-slot }} slot"

      - name: ìµœì¢… ê²€ì¦
        run: |
          echo "ğŸ” Final production verification..."
          
          # ë©”ì¸ ë„ë©”ì¸ìœ¼ë¡œ ìµœì¢… í™•ì¸
          curl -f https://vridge.vlanet.net/api/health || exit 1
          curl -f https://vridge.vlanet.net/ || exit 1
          
          # ì„±ëŠ¥ ë©”íŠ¸ë¦­ í™•ì¸
          # ì‹¤ì œë¡œëŠ” APM ë„êµ¬ë‚˜ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì—ì„œ í™•ì¸
          
          echo "âœ… Production deployment verified successfully"

      - name: ì´ì „ ìŠ¬ë¡¯ ì •ë¦¬ (30ë¶„ ëŒ€ê¸° í›„)
        run: |
          echo "ğŸ§¹ Scheduling cleanup of previous slot..."
          echo "Previous slot will be cleaned up after 30 minutes for rollback safety"
          
          # ë°±ê·¸ë¼ìš´ë“œì—ì„œ 30ë¶„ í›„ ì´ì „ ìŠ¬ë¡¯ ì •ë¦¬
          # (ì‹¤ì œë¡œëŠ” ë³„ë„ì˜ í¬ë¡ ì¡ì´ë‚˜ ìŠ¤ì¼€ì¤„ëŸ¬ ì‚¬ìš© ê¶Œì¥)

  # ========================================
  # Stage 7: ë°°í¬ í›„ ëª¨ë‹ˆí„°ë§
  # ========================================
  post-deployment-monitoring:
    name: ğŸ“Š ë°°í¬ í›„ ëª¨ë‹ˆí„°ë§
    runs-on: ubuntu-latest
    needs: [pre-deployment-validation, deploy-production]
    if: needs.pre-deployment-validation.outputs.environment == 'production' && always()
    
    steps:
      - name: ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ëŒ€ê¸°
        run: |
          echo "â³ Waiting 5 minutes for performance metrics to stabilize..."
          sleep 300

      - name: Core Web Vitals ëª¨ë‹ˆí„°ë§
        run: |
          echo "ğŸ“Š Monitoring Core Web Vitals..."
          
          # Lighthouse CIë¡œ ë°°í¬ í›„ ì„±ëŠ¥ ì¸¡ì •
          npx lhci autorun --config=.lighthouserc.production.json
          
          # ì„±ëŠ¥ ì„ê³„ê°’ ê²€ì‚¬
          LCP=$(cat lhci-results.json | jq '.median.firstRun.lcp')
          FID=$(cat lhci-results.json | jq '.median.firstRun.fid // 0')
          CLS=$(cat lhci-results.json | jq '.median.firstRun.cls')
          
          echo "Current Performance:"
          echo "LCP: ${LCP}ms"
          echo "FID: ${FID}ms" 
          echo "CLS: $CLS"
          
          # ì„±ëŠ¥ ì €í•˜ ê°ì§€
          if (( $(echo "$LCP > 3000" | bc -l) )); then
            echo "âš ï¸ Performance degradation detected: LCP > 3s"
            # Slack ì•Œë¦¼ì´ë‚˜ ìë™ ë¡¤ë°± íŠ¸ë¦¬ê±° ê°€ëŠ¥
          fi

      - name: ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”íŠ¸ë¦­ í™•ì¸
        run: |
          echo "ğŸ“ˆ Checking application metrics..."
          
          # APM ë„êµ¬ë‚˜ ë©”íŠ¸ë¦­ ì„œë²„ì—ì„œ ë°ì´í„° ìˆ˜ì§‘
          # ì˜ˆ: ì‘ë‹µì‹œê°„, ì—ëŸ¬ìœ¨, ì²˜ë¦¬ëŸ‰ ë“±
          
          ERROR_RATE=$(curl -s https://metrics.vlanet.net/api/error-rate/5m || echo "0")
          RESPONSE_TIME=$(curl -s https://metrics.vlanet.net/api/response-time/5m || echo "0")
          
          echo "5ë¶„ê°„ í‰ê·  ë©”íŠ¸ë¦­:"
          echo "Error Rate: ${ERROR_RATE}%"
          echo "Response Time: ${RESPONSE_TIME}ms"
          
          # ì„ê³„ê°’ ê²€ì‚¬
          if (( $(echo "$ERROR_RATE > 1" | bc -l) )); then
            echo "ğŸš¨ High error rate detected: ${ERROR_RATE}%"
            exit 1
          fi

      - name: ë°°í¬ ì„±ê³µ ì•Œë¦¼
        uses: 8398a7/action-slack@v3
        if: success()
        with:
          status: success
          text: "ğŸ‰ Production deployment successful! Version ${{ needs.pre-deployment-validation.outputs.version }} is now live."
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: ë°°í¬ ì‹¤íŒ¨ ì•Œë¦¼ ë° ë¡¤ë°± íŠ¸ë¦¬ê±°
        if: failure()
        run: |
          echo "ğŸš¨ Post-deployment monitoring failed - triggering rollback"
          
          # ìë™ ë¡¤ë°± ë¡œì§
          # kubectl rollout undo deployment/vridge-web-production
          
          # ì‹¤íŒ¨ ì•Œë¦¼
          curl -X POST ${{ secrets.SLACK_WEBHOOK_URL }} \
            -H 'Content-type: application/json' \
            --data '{
              "text": "ğŸš¨ Production deployment failure detected!",
              "attachments": [{
                "color": "danger",
                "fields": [{
                  "title": "Version",
                  "value": "${{ needs.pre-deployment-validation.outputs.version }}",
                  "short": true
                }, {
                  "title": "Status", 
                  "value": "Rollback initiated",
                  "short": true
                }]
              }]
            }'

  # ========================================
  # Stage 8: ë°°í¬ ì™„ë£Œ ì²˜ë¦¬
  # ========================================
  deployment-completion:
    name: âœ… ë°°í¬ ì™„ë£Œ ì²˜ë¦¬
    runs-on: ubuntu-latest
    needs: [pre-deployment-validation, deploy-staging, deploy-production, post-deployment-monitoring]
    if: always()
    
    steps:
      - name: ë°°í¬ ê²°ê³¼ ìš”ì•½
        run: |
          echo "ğŸ“‹ Deployment Summary"
          echo "===================="
          echo "Version: ${{ needs.pre-deployment-validation.outputs.version }}"
          echo "Environment: ${{ needs.pre-deployment-validation.outputs.environment }}"
          echo "Staging: ${{ needs.deploy-staging.result }}"
          echo "Production: ${{ needs.deploy-production.result }}"
          echo "Monitoring: ${{ needs.post-deployment-monitoring.result }}"
          
          if [[ "${{ needs.deploy-production.result }}" == "success" ]] && [[ "${{ needs.post-deployment-monitoring.result }}" == "success" ]]; then
            echo "ğŸ‰ Deployment completed successfully!"
          else
            echo "âŒ Deployment encountered issues"
          fi

      - name: ë°°í¬ ê¸°ë¡ ì—…ë°ì´íŠ¸
        run: |
          echo "ğŸ“ Updating deployment records..."
          
          # ë°°í¬ ì´ë ¥ì„ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì— ê¸°ë¡
          # ì˜ˆ: deployment tracking service í˜¸ì¶œ
          
          echo "âœ… Deployment records updated"

      - name: ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ìë™)
        run: |
          echo "ğŸ“š Updating deployment documentation..."
          
          # CHANGELOG.md ìë™ ì—…ë°ì´íŠ¸
          # API ë¬¸ì„œ ë²„ì „ ì—…ë°ì´íŠ¸
          # ë°°í¬ ê°€ì´ë“œ ìµœì‹ í™”
          
          echo "âœ… Documentation updated"