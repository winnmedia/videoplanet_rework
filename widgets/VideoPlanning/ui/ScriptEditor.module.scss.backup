/**
 * @description Script Editor 스타일
 * @purpose 대본 에디터 전용 스타일링
 */

@use '@/shared/config/design-tokens.scss' as *;

.editor {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: $color-white;
  border-radius: $radius-lg;
  box-shadow: $shadow-md;
  overflow: hidden;
}

// 에디터 헤더
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: $spacing-lg;
  background: linear-gradient(135deg, $bg-secondary 0%, $color-white 100%);
  border-bottom: $border-1 solid $color-gray-200;

  .headerInfo {
    h2 {
      font-size: $font-size-xl;
      font-weight: $font-weight-semibold;
      color: $color-text-primary;
      margin: 0 0 $spacing-xs 0;
    }

    .stats {
      display: flex;
      gap: $spacing-md;
      font-size: $font-size-sm;
      color: $color-text-secondary;

      span {
        padding: $spacing-xs $spacing-sm;
        background: rgba($color-primary, 0.1);
        border-radius: $radius-sm;
      }
    }
  }

  .addButton {
    @include button-base;
    background: $color-primary;
    color: $color-white;
    padding: $spacing-sm $spacing-lg;
    font-size: $font-size-sm;

    &:hover {
      background: $color-primary-dark;
    }
  }
}

// 자동 저장 상태
.autoSave {
  padding: $spacing-sm;
  background: rgba($color-success, 0.1);
  color: $color-success;
  text-align: center;
  font-size: $font-size-xs;
  animation: fadeIn 0.3s ease-in-out;
}

// 섹션 목록
.sections {
  flex: 1;
  overflow-y: auto;
  padding: $spacing-lg;

  .section {
    margin-bottom: $spacing-xl;
    border: $border-1 solid $color-gray-200;
    border-radius: $radius-md;
    background: $color-white;

    &:last-child {
      margin-bottom: 0;
    }
  }

  .sectionHeader {
    display: flex;
    align-items: center;
    gap: $spacing-md;
    padding: $spacing-md $spacing-lg;
    background: $bg-secondary;
    border-bottom: $border-1 solid $color-gray-200;

    .sectionMeta {
      display: flex;
      align-items: center;
      gap: $spacing-sm;

      .sectionNumber {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: $color-primary;
        color: $color-white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: $font-size-xs;
        font-weight: $font-weight-bold;
      }

      .sectionType {
        padding: $spacing-xs $spacing-sm;
        border-radius: $radius-sm;
        font-size: $font-size-xs;
        font-weight: $font-weight-medium;

        &.type-scene { background: rgba($color-info, 0.1); color: $color-info; }
        &.type-voiceover { background: rgba($color-warning, 0.1); color: $color-warning; }
        &.type-interview { background: rgba($color-success, 0.1); color: $color-success; }
        &.type-transition { background: rgba($color-gray-500, 0.1); color: $color-gray-500; }
        &.type-intro { background: rgba($color-primary, 0.1); color: $color-primary; }
        &.type-outro { background: rgba($color-error, 0.1); color: $color-error; }
      }
    }

    .sectionTitle {
      flex: 1;
      margin: 0;
      font-size: $font-size-lg;
      font-weight: $font-weight-semibold;
      color: $color-text-primary;

      .titleInput {
        width: 100%;
        background: none;
        border: none;
        font: inherit;
        color: inherit;
        padding: $spacing-xs 0;

        &:focus {
          outline: $border-2 solid $color-primary;
          outline-offset: 2px;
        }
      }
    }

    .sectionActions {
      display: flex;
      gap: $spacing-xs;

      button {
        width: 28px;
        height: 28px;
        border: none;
        border-radius: $radius-sm;
        background: transparent;
        color: $color-text-secondary;
        cursor: pointer;
        transition: $transition-all;
        display: flex;
        align-items: center;
        justify-content: center;

        &:hover {
          background: rgba($color-gray-500, 0.1);
          color: $color-text-primary;
        }

        &:disabled {
          opacity: 0.3;
          cursor: not-allowed;
        }

        &.deleteButton:hover {
          background: rgba($color-error, 0.1);
          color: $color-error;
        }
      }
    }
  }

  .sectionContent {
    padding: $spacing-lg;

    .contentDisplay {
      font-size: $font-size-md;
      line-height: $line-height-relaxed;
      color: $color-text-primary;
      margin: 0;
      white-space: pre-wrap;
    }

    .contentTextarea {
      width: 100%;
      min-height: 120px;
      border: $border-1 solid $color-gray-300;
      border-radius: $radius-md;
      padding: $spacing-md;
      font-family: $font-primary;
      font-size: $font-size-md;
      line-height: $line-height-relaxed;
      resize: vertical;
      transition: $transition-colors;

      &:focus {
        outline: none;
        border-color: $color-primary;
        box-shadow: 0 0 0 3px rgba($color-primary, 0.1);
      }

      &::placeholder {
        color: $color-gray-500;
      }
    }
  }

  .sectionStats {
    display: flex;
    gap: $spacing-md;
    padding: 0 $spacing-lg $spacing-sm;
    font-size: $font-size-xs;
    color: $color-text-secondary;

    span {
      padding: $spacing-xs $spacing-sm;
      background: $color-gray-100;
      border-radius: $radius-sm;
    }
  }

  .sectionNotes {
    padding: $spacing-md $spacing-lg $spacing-lg;
    border-top: $border-1 solid $color-gray-100;
    background: rgba($color-gray-50, 0.5);

    .notesDisplay {
      font-size: $font-size-sm;
      color: $color-text-secondary;
      font-style: italic;
      margin: 0;
    }

    .notesTextarea {
      width: 100%;
      border: $border-1 solid $color-gray-200;
      border-radius: $radius-sm;
      padding: $spacing-sm;
      font-family: $font-primary;
      font-size: $font-size-sm;
      resize: vertical;
      background: $color-white;

      &:focus {
        outline: none;
        border-color: $color-primary;
      }

      &::placeholder {
        color: $color-gray-400;
        font-style: italic;
      }
    }
  }
}

// 빈 상태
.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 300px;
  text-align: center;
  color: $color-text-secondary;

  p {
    font-size: $font-size-md;
    margin: 0 0 $spacing-lg 0;
  }

  .addFirstSection {
    @include button-base;
    background: $color-primary;
    color: $color-white;
    padding: $spacing-md $spacing-xl;
    font-size: $font-size-sm;

    &:hover {
      background: $color-primary-dark;
    }
  }
}

// 애니메이션
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// 접근성 및 반응형
@include mobile {
  .header {
    flex-direction: column;
    align-items: stretch;
    gap: $spacing-md;

    .headerInfo .stats {
      flex-wrap: wrap;
    }
  }

  .sections .sectionHeader {
    flex-direction: column;
    align-items: stretch;
    gap: $spacing-sm;
  }
}