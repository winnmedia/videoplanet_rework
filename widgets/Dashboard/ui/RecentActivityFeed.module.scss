@use '@/shared/config/design-tokens.scss' as *;

.activityFeed {
  display: flex;
  flex-direction: column;
  gap: 0;
}

// 개별 활동 아이템
.activityItem {
  position: relative;
  display: flex;
  gap: $spacing-md;
  padding: $spacing-md 0;
  transition: $transition-colors;

  &:first-child {
    padding-top: 0;
  }

  &:last-child {
    padding-bottom: 0;
  }

  &.clickable {
    cursor: pointer;
    border-radius: $radius-md;
    padding: $spacing-md;
    margin: 0 (-$spacing-md);

    &:hover {
      background: $color-gray-50;
    }

    &:focus-visible {
      outline: 2px solid $color-primary;
      outline-offset: 2px;
    }
  }
}

// 활동 아이콘
.activityIcon {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.iconEmoji {
  font-size: $font-size-md;
  line-height: 1;
}

// 활동 타입별 색상
.activityProjectCreated {
  background: rgba(0, 49, 255, 0.1);
  border: 2px solid rgba(0, 49, 255, 0.2);
}

.activityPhaseCompleted {
  background: rgba(40, 167, 69, 0.1);
  border: 2px solid rgba(40, 167, 69, 0.2);
}

.activityFileUploaded {
  background: rgba(23, 162, 184, 0.1);
  border: 2px solid rgba(23, 162, 184, 0.2);
}

.activityCommentAdded {
  background: rgba(255, 193, 7, 0.1);
  border: 2px solid rgba(255, 193, 7, 0.2);
}

.activityStatusChanged {
  background: rgba(108, 117, 125, 0.1);
  border: 2px solid rgba(108, 117, 125, 0.2);
}

// 활동 내용
.activityContent {
  flex: 1;
  min-width: 0; // flexbox에서 텍스트 truncation을 위해 필요
}

.activityHeader {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: $spacing-sm;
  margin-bottom: $spacing-xs;
}

.activityTitle {
  font-size: $font-size-sm;
  font-weight: $font-weight-semibold;
  color: $color-text-primary;
  margin: 0;
  line-height: $line-height-tight;

  // 긴 제목 처리
  @include truncate;
  max-width: 200px;

  @include mobile {
    max-width: 150px;
  }
}

.activityTime {
  font-size: $font-size-xs;
  color: $color-text-secondary;
  font-weight: $font-weight-regular;
  flex-shrink: 0;
}

.activityDescription {
  font-size: $font-size-sm;
  color: $color-text-secondary;
  line-height: $line-height-normal;
  margin: 0 0 $spacing-sm 0;

  // 긴 설명 처리 (2줄로 제한)
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.activityMeta {
  display: flex;
  align-items: center;
  gap: $spacing-xs;
  font-size: $font-size-xs;
  color: $color-text-secondary;
}

.activityUser {
  font-weight: $font-weight-medium;
  color: $color-primary;
}

.metaSeparator {
  color: $color-gray-300;
}

.activityProject {
  font-weight: $font-weight-medium;
  
  @include truncate;
  max-width: 120px;

  @include mobile {
    max-width: 80px;
  }
}

// 구분선
.activityDivider {
  position: absolute;
  bottom: 0;
  left: 54px; // 아이콘 너비 + 간격을 고려
  right: 0;
  height: 1px;
  background: $color-gray-200;
}

// 빈 상태
.emptyFeed {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $spacing-2xl;
  text-align: center;
}

.emptyIcon {
  font-size: 48px;
  margin-bottom: $spacing-md;
  opacity: 0.5;
}

.emptyText {
  font-size: $font-size-md;
  color: $color-text-secondary;
  margin: 0;
}

// 더보기 힌트
.loadMoreHint {
  padding: $spacing-md;
  text-align: center;
  font-size: $font-size-xs;
  color: $color-text-secondary;
  background: $color-gray-50;
  border-radius: $radius-md;
  margin-top: $spacing-sm;
}

// 반응형 조정
@include mobile {
  .activityItem {
    gap: $spacing-sm;
    
    &.clickable {
      padding: $spacing-sm;
      margin: 0 (-$spacing-sm);
    }
  }

  .activityIcon {
    width: 32px;
    height: 32px;
  }

  .iconEmoji {
    font-size: $font-size-sm;
  }

  .activityHeader {
    flex-direction: column;
    align-items: stretch;
    gap: $spacing-xs;
  }

  .activityTitle {
    max-width: none;
  }

  .activityTime {
    align-self: flex-end;
  }

  .activityDescription {
    -webkit-line-clamp: 1; // 모바일에서는 1줄로 제한
  }

  .activityMeta {
    flex-wrap: wrap;
  }

  .activityDivider {
    left: 46px; // 모바일에서 작아진 아이콘 고려
  }
}

// 타블렛 조정
@include tablet {
  .activityTitle {
    max-width: 180px;
  }

  .activityProject {
    max-width: 100px;
  }
}

// 접근성 개선
@media (prefers-reduced-motion: reduce) {
  .activityItem {
    transition: none;
  }
}

// 고대비 모드 지원
@media (prefers-contrast: high) {
  .activityIcon {
    border-width: 3px;
  }

  .activityDivider {
    background: $color-text-primary;
    height: 2px;
  }
}