/**
 * DatePicker 스타일 - 날짜 선택 컴포넌트
 * VLANET Design Tokens 사용
 */

@use '@/shared/config/design-tokens.scss' as *;

.datePicker {
  @include card;
  width: 320px;
  background: $color-white;
  border: $border-1 solid $color-gray-300;
  border-radius: $radius-lg;
  box-shadow: $shadow-lg;
  padding: $spacing-md;
  z-index: $z-index-popover;
  position: absolute;
  
  &:focus {
    outline: none;
  }
  
  @include mobile {
    width: 280px;
    padding: $spacing-sm;
  }
}

// ===========================
// 헤더 영역
// ===========================

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: $spacing-md;
  padding-bottom: $spacing-sm;
  border-bottom: $border-1 solid $color-gray-200;
}

.monthYear {
  font-size: $font-size-lg;
  font-weight: $font-weight-semibold;
  color: $color-text-primary;
  
  @include mobile {
    font-size: $font-size-base;
  }
}

.navigation {
  display: flex;
  gap: $spacing-xs;
}

.navButton {
  @include button-base;
  width: 32px;
  height: 32px;
  background: $color-gray-100;
  color: $color-gray-600;
  border-radius: $radius-full;
  font-size: $font-size-lg;
  font-weight: $font-weight-bold;
  
  &:hover {
    background: $color-primary;
    color: $color-white;
  }
  
  &:active {
    transform: scale(0.95);
  }
}

// ===========================
// 액션 버튼 영역
// ===========================

.actions {
  display: flex;
  gap: $spacing-sm;
  margin-bottom: $spacing-sm;
}

.actionButton {
  @include button-base;
  padding: $spacing-xs $spacing-sm;
  font-size: $font-size-sm;
  color: $color-primary;
  background: $color-primary-lighter;
  border-radius: $radius-md;
  
  &:hover {
    background: $color-primary;
    color: $color-white;
  }
}

// ===========================
// 요일 헤더
// ===========================

.weekdayHeaders {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  margin-bottom: $spacing-sm;
}

.weekdayHeader {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 32px;
  font-size: $font-size-sm;
  font-weight: $font-weight-semibold;
  color: $color-gray-600;
  
  &.weekend {
    color: $color-error;
  }
}

// ===========================
// 캘린더 그리드
// ===========================

.calendar {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.week {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.day {
  @include button-base;
  height: 36px;
  font-size: $font-size-sm;
  color: $color-gray-700;
  background: transparent;
  border-radius: $radius-md;
  position: relative;
  transition: $transition-all;
  
  &:hover:not(:disabled) {
    background: $color-primary-lighter;
    color: $color-primary;
  }
  
  &:focus {
    @include focus-visible;
    z-index: $z-index-10;
  }
  
  // 오늘 날짜
  &.today {
    background: $color-primary;
    color: $color-white;
    font-weight: $font-weight-bold;
    
    &:hover {
      background: $color-primary-dark;
    }
  }
  
  // 선택된 날짜
  &.selected {
    background: $color-primary-dark;
    color: $color-white;
    font-weight: $font-weight-semibold;
    
    &.today {
      background: $color-primary-dark;
    }
  }
  
  // 포커스된 날짜
  &.focused {
    box-shadow: 0 0 0 2px $color-primary;
  }
  
  // 다른 월의 날짜
  &.otherMonth {
    color: $color-gray-400;
    
    &:hover:not(:disabled) {
      color: $color-gray-600;
      background: $color-gray-100;
    }
  }
  
  // 주말 날짜
  &.weekend {
    color: $color-error;
    
    &.otherMonth {
      color: rgba($color-error, 0.4);
    }
  }
  
  // 비활성화된 날짜
  &.disabled {
    color: $color-gray-300;
    cursor: not-allowed;
    
    &:hover {
      background: transparent;
      color: $color-gray-300;
    }
    
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 10%;
      right: 10%;
      height: 1px;
      background: $color-gray-400;
      transform: translateY(-50%);
    }
  }
  
  @include mobile {
    height: 32px;
    font-size: $font-size-xs;
  }
}

// ===========================
// 접근성 개선
// ===========================

// 키보드 내비게이션 가이드 (숨겨진 텍스트)
.datePicker::before {
  content: "화살표 키로 날짜 탐색, Enter로 선택, Escape로 닫기";
  position: absolute;
  left: -10000px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

// 고대비 모드 지원
@media (prefers-contrast: high) {
  .datePicker {
    border: $border-2 solid $color-gray-900;
  }
  
  .day {
    border: $border-1 solid transparent;
    
    &:hover:not(:disabled) {
      border-color: $color-primary;
    }
    
    &.selected,
    &.today {
      border-color: $color-white;
    }
    
    &.focused {
      border: $border-2 solid $color-primary;
      box-shadow: none;
    }
  }
}

// 움직임 줄이기 모드
@media (prefers-reduced-motion: reduce) {
  .day,
  .navButton,
  .actionButton {
    transition: none;
  }
  
  .navButton:active {
    transform: none;
  }
}

// ===========================
// 다크 모드 지원 (미래 기능)
// ===========================

@media (prefers-color-scheme: dark) {
  .datePicker {
    background: $color-dark;
    border-color: $color-gray-700;
    color: $color-white;
  }
  
  .monthYear {
    color: $color-white;
  }
  
  .header {
    border-bottom-color: $color-gray-700;
  }
  
  .weekdayHeader {
    color: $color-gray-300;
    
    &.weekend {
      color: #ff6b6b;
    }
  }
  
  .navButton {
    background: $color-gray-800;
    color: $color-gray-300;
    
    &:hover {
      background: $color-primary;
      color: $color-white;
    }
  }
  
  .actionButton {
    background: rgba($color-primary, 0.2);
    
    &:hover {
      background: $color-primary;
    }
  }
  
  .day {
    color: $color-gray-300;
    
    &:hover:not(:disabled) {
      background: rgba($color-primary, 0.2);
    }
    
    &.otherMonth {
      color: $color-gray-600;
    }
    
    &.weekend {
      color: #ff6b6b;
    }
    
    &.disabled {
      color: $color-gray-700;
      
      &::after {
        background: $color-gray-600;
      }
    }
  }
}

// ===========================
// 애니메이션 효과
// ===========================

.datePicker {
  animation: datePickerFadeIn 0.2s ease-out;
}

@keyframes datePickerFadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// 월 변경 시 부드러운 전환 (선택사항)
.calendar {
  transition: opacity 0.15s ease-in-out;
  
  &.changing {
    opacity: 0.7;
  }
}

// ===========================
// 레거시 디자인 시스템 호환
// ===========================

.datePicker {
  border-radius: 12px; // 중간 크기 컴포넌트용
  font-family: $font-primary;
}

// 버튼 스타일 통일
.navButton,
.actionButton {
  font-family: inherit;
}

// 레거시 색상 변수 사용
.day {
  &.today {
    background: $color-primary;
    
    &:hover {
      background: $color-primary-dark;
    }
  }
  
  &.selected {
    background: $color-primary-light;
  }
}