최상단 고지(Design & Dev Guideline)

**UX/UI: 기존 레거시 톤앤매너(대표 색상, 초미니멀, 세련된 디자인) 엄격 유지 및 통합형으로 개발 할 것**

**개발 방식**
3가지 핵심 주의사항만 반드시 지켜주세요. (FSD·TDD 포함, 코드 없음)

1) FSD 경계 준수(Feature-Sliced Design)

무엇: shared → entities → features → widgets → app/pages 단방향 의존만 허용하고, 각 슬라이스는 Public API(index) 로만 외부 공개합니다.

왜: 레이어 침식·순환 의존을 막아 유지보수성과 테스트 용이성을 확보합니다.

어떻게: 깊은 경로 임포트 금지, 배럴→배럴 재수출 금지, Named export 우선, 경로 별칭(@shared/* 등) 사용, ESLint import/no-cycle로 상시 점검.

2) TDD 우선 흐름(행동 기준 테스트)

무엇: “테스트(실패) → 최소 구현(통과) → 리팩터링” 순서로, 기능은 수용기준(DoD) 을 테스트로 먼저 고정합니다.

왜: 요구사항 누락·회귀를 방지하고, 리팩터링 시 안전망을 보장합니다.

어떻게: 유닛(도메인 로직) → 통합(API/스토리 플로우) → E2E(스모크) 최소 세트를 유지하고, 플레이크(비결정성) 유발 요소(시간/네트워크 의존) 는 테스트 더블로 격리합니다.

3) 클린 임포트·중복 제로(DRY)

무엇: 동일 목적의 코드/스타일/유틸은 하나의 모듈로 통합하고, 사이드이펙트 임포트 금지(전역 스타일/폴리필 등 예외만 허용) 합니다.

왜: 중복·은닉 결합이 쌓이면 리팩터링 비용이 기하급수적으로 증가합니다.

어떻게: 타입 전용 임포트(import type) 구분, 임포트 정렬(외부→내부→상대), 상호 순환 차단, 클라이언트↔서버 경계 준수(클라에서 서버 유틸 임포트 금지) 를 린트/CI로 강제합니다.

**대시보드**
역할

서비스 전반 상태를 한눈에 파악하고 우선 액션(코멘트 확인·초대 관리·일정 확인)으로 빠르게 진입

핵심기능

새 피드 요약: 새 코멘트/대댓글/감정표현 변화 집계(클릭 시 상세 이동)

초대 관리 요약: 전송/재전송/수락/거절/받은 초대 현황 + 빠른 액션

편집 일정 간트 요약: 프로젝트별 기획·촬영·편집 진행(주/월)

보조기능

프로젝트/조직/기간 필터, 검색, 읽음 처리, 수동 새로고침

읽지 않음 배지: 미열람 수를 점 배지(최대 9+)로 표시, 상세 진입 시 자동 읽음 / “모두 읽음” 제공, aria-label 동적 갱신

필요 UI요소

카드/리스트(아이콘·제목·타임스탬프·배지), 필터/검색 바, 탭, 미니 간트(범례/Today/툴팁), 빠른 액션 버튼, 토스트/빈 상태/로딩, 읽지 않음 배지

**전체일정(캘린더)**
역할

모든 프로젝트의 기획–촬영–편집 일정을 달력/간트로 통합 관리
→ 촬영 일정 충돌만 경고(기획/편집 충돌 경고 없음)

핵심기능

달력(월/주): 프로젝트·페이즈 색상 블록

간트 보드: 기간 확인, 드래그 조정(권한 내)

보조기능

프로젝트/조직/담당자/기간 필터

프로젝트별 색상 범례 고정: 우상단 스와치+프로젝트명(수평 스크롤), 토글(전체/내 프로젝트)

‘충돌만 보기’ 체크박스: 촬영 충돌 블록만 필터 노출

충돌 경고: 점선 테두리 + 경고 아이콘 + 옅은 사선 패턴, 툴팁에 충돌 상세

필요 UI요소

캘린더/간트(저채도 틴트 채움 + 좌측 보더 + 페이즈 배지), 날짜 피커, 저장/취소, 범례 고정 영역, ‘충돌만 보기’ 체크박스, 경고 배너/툴팁

색상 원칙(요지): 프로젝트별 고유 Hue(저채도 12–16% 틴트 채움, 좌측 보더 원색), Red는 경고 전용

**프로젝트 관리(프로젝트 생성 & 팀원 초대)**
역할

프로젝트 생성·기본 설정·권한과 초대 메일 발송으로 협업 시작을 신속화

핵심기능

새 프로젝트 생성 – 자동 일정 디폴트: 기획 1주, 촬영 1일, 편집 2주 자동 등록 → 사용자는 그대로 사용 또는 수정

팀원 초대(이메일 전송/재전송): SendGrid API 사용, 레거시 초대메일 디자인 그대로 사용, 역할/만료일 지정, 상태 추적

권한(RBAC): Owner / Admin / Editor / Reviewer / Viewer

보조기능

초대 링크 복사/철회, 받은 초대 수락/거절, 목록 검색·필터·페이징

초대 재전송 쿨다운 60초: 버튼 비활성 + 카운트다운 툴팁(중복 전송 방지)

필요 UI요소

자동 일정 프리뷰 카드: 생성 폼 하단에 바 형태(1주/1일/2주), 수동 전환·날짜 수정 시 즉시 반영

초대 폼(이메일 칩·역할·만료일), 초대/멤버 테이블(상태·재전송/철회), 확인 모달, 토스트, 오류 메시지, 아바타 그룹, 공유 배지

**영상 기획(새 기능)**
역할

한 줄 스토리 → 4단계 → 12숏 → 콘티/인서트 → JSON + Marp PDF까지 자동·반자동 기획 산출

사용자 여정(3단계 위저드)
STEP 1 – 입력/선택

입력란: 제목, 한 줄 스토리(로그라인)

드롭다운: 톤앤매너(잔잔/발랄/소름/귀엽/시크…), 장르(드라마/공포/SF/액션/광고/다큐…), 타겟, 분량(30/60/90초…), 포맷(인터뷰/스토리텔링/애니메이션/모션그래픽…), 템포(빠르게/보통/느리게)

버튼 그룹: 전개 방식(훅–몰입–반전–떡밥/기승전결/귀납/연역/다큐(인터뷰식)/픽사), 전개 강도(그대로/적당히/풍부하게)

프리셋 버튼(3~4개): 클릭 시 위 값들 자동 채움(예: 브랜드30초·빠른·훅몰반 / 다큐90초·보통·인터뷰식 / 드라마60초·풍부·기승전결)

[생성] → Railway의 Google Gemini API 키로 LLM 호출 → 4단계(기·승·전·결) 초안

STEP 2 – 4단계 검토/수정

카드 4개(요약/본문/목표/길이 힌트), 인라인 편집(되돌리기/초기화)

[숏 생성] → 정확히 12개 숏으로 자동 분해

STEP 3 – 12숏 편집·콘티·인서트·내보내기

숏 카드(3×4):

좌: 콘티 프레임 + [생성/재생성/다운로드] — Google 이미지 생성 API(GOOGLE_API_KEY), 러프 스케치(흑백·연필)

우: 숏 제목/서술, 샷/카메라/구도, 길이(초), 대사/자막/오디오, 전환

인서트 3컷 추천: 목적/컷 설명/프레이밍(재생성 가능)

기획안 다운로드: JSON + Marp PDF(A4 가로, 여백 0)

LLM/편집 규칙(요지)

4단계 생성: 전개 방식·강도 반영(그대로=간결 / 적당히=균형 / 풍부하게=감정·환경 확대)

12숏 분해: 4단계×3숏=정확히 12, 템포별 길이 힌트(빠 4–6초/보 6–8초/느 8–12초)

인서트: 목적 중복 금지(정보/리듬/관계·디테일 강화)

콘티 스타일: “storyboard pencil sketch, rough, monochrome”(+ 네거티브: 글리치/텍스트 오버레이 금지)

Marp PDF(여백 0 · A4 가로 · 페이지형 UI)

페이지 구성:

표지(제목 + 메타) 2) 4단계 개요(2×2 카드)

12숏 반복(좌 이미지 / 우 상세 + 하단 인서트 요약)

푸터/페이지 번호: 하단 우측 VLANET • {프로젝트명} • {p}/{n} (Light/Dark 테마 중 선택)

필요 UI요소

스텝퍼, 입력 폼(텍스트/드롭다운/버튼 그룹), 프리셋 버튼, 생성 진행 표시, 4단계 카드 에디터, 12숏 그리드(콘티 프레임/액션 버튼/편집 필드), 인서트 칩, 내보내기 모달(JSON/MARP PDF), 토스트/로딩/에러 배너

**영상 피드백**
역할

영상 재생 + 타임코드 기반 코멘트 협업으로 리뷰 효율 향상 (실시간 제외)

레이아웃

좌: 비디오 플레이어(아이콘+툴팁: 업로드/교체/현재 시점 코멘트/스크린샷/공유)

우 탭: 코멘트 / 팀원 / 프로젝트 정보

핵심기능

코멘트: ‘댓글’→‘코멘트’ 표준화, 대댓글, 감정표현 3종(좋아요/싫어요/질문 있어요), 정렬/필터(타임코드/최신/해결)

팀원: 이메일 초대/재전송, 상태 표시(프로젝트 관리와 연동)

프로젝트 정보: 제목/버전/길이/해상도/멤버/공유 상태, 편집 일정 미니 간트

보조기능(통합 사양)

타임코드 자동 반영: ‘현재 시점 코멘트’ 클릭 또는 단축키 T → 입력란 선두에 [mm:ss.mmm] 자동 삽입(중복 방지, 커서 유지)

스크린샷 파일명 규칙: project-{slug}_TC{mmssfff}_{YYYY-MM-DD}T{HHmmss}.jpg (프로젝트/타임코드/타임스탬프 포함)

스크린샷 첨부 미리보기, 공유 권한·만료 설정, 수동 새로고침

필요 UI요소

플레이어 툴바, 코멘트 입력/리스트(대댓글·리액션·첨부 썸네일), 팀원 탭(초대 폼·목록), 프로젝트 정보 탭(정보 칩·미니 간트·공유 관리), 모달(업로드/교체/공유), 토스트/오류 배너/로딩

**기타(전역 서브메뉴)**
핵심

서브메뉴 투명도 90%(라이트/다크 일관), 포커스 트랩/ESC/바깥 클릭 닫기, 키보드 화살표 탐색, role/aria 속성

**전역 알림 센터(간단)**
구성/동작

헤더 벨 아이콘 → 드로어에 최근 10개 알림(초대, 코멘트/대댓글/리액션, 촬영 충돌 경고) 표시

알림 클릭 시 관련 화면 이동·읽음 처리, 수동 새로고침 아이콘 제공(실시간 없음)

접근성: 포커스 트랩, ESC 닫기, aria-label에 새 알림 수 노출

**수용 기준(DoD) — 통합판**

프로젝트 생성 시 자동 일정(기획 1주·촬영 1일·편집 2주) 등록 및 프리뷰 카드 노출, 수정 시 즉시 반영

초대 메일: SendGrid + 레거시 템플릿, 재전송 60초 쿨다운 적용

캘린더: 프로젝트 색상 범례 고정, **‘충돌만 보기’**가 촬영 충돌만 정확히 필터

영상 기획: STEP1(프리셋 포함) → STEP2(수정 반영) → STEP3(12숏·콘티·인서트) → JSON + Marp PDF(푸터 페이지 번호, A4 가로/여백 0) 다운로드 완주

영상 피드백: 좌/우 레이아웃, 타임코드 자동 프리필, 스크린샷 파일명 규칙 일관 적용, 코멘트·대댓글·감정표현·공유 설정 정상 동작

대시보드: 읽지 않음 배지 정확 표기(상세 진입 시 자동 읽음), 간트 요약/초대 요약 동작

알림 센터: 최근 10개 알림 노출·이동·읽음, 접근성 요건 충족

복잡한 코드를 요하는 작업(참고)

LLM 오케스트레이션(4단계/12숏 일관성, 스키마 검증·보정)

JSON → Marp 마크다운 → PDF 조판 파이프라인(A4 가로/여백 0, 푸터/페이지 번호, 이미지 경로 처리)

촬영 충돌 판정 로직(기간 겹침 정확 검출)

위 3가지는 상대적으로 난이도가 높은 편이며, 나머지는 UI/상태·간단 유틸 수준입니다.